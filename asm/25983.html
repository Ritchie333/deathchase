<!DOCTYPE html>
<html>
<head>
<title>Deathchase: Routine at 657F</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />

</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">Deathchase</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="25904.html">6530</a></span></td>
<td class="up">Up: <a href="../maps/all.html#25983">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="26035.html">65B3</a></span></td>
</tr>
</table>
<div class="description">657F: Main entry point</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="4">
<div class="details">

</div>
<table class="input-0">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>

</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="25983"></span>657F</td>
<td class="instruction">DI</td>
<td class="comment-11" rowspan="1">Turn off interrupts</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="25984"></span>6580</td>
<td class="instruction">LD A,($5AE0)</td>
<td class="comment-11" rowspan="1">The value of $5AE0 is set up in the BASIC</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="25987"></span>6583</td>
<td class="instruction">CP $24</td>
<td class="comment-11" rowspan="1">It is unchanged?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="25989"></span>6585</td>
<td class="instruction">CALL NZ,$0000</td>
<td class="comment-11" rowspan="1">If not, reset - someone's been cracking the game</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="25992"></span>6588</td>
<td class="instruction">LD A,$01</td>
<td class="comment-11" rowspan="1">Select BLUE border</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="25994"></span>658A</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="25995"></span>658B</td>
<td class="instruction">CALL <a href="24746.html">$60AA</a></td>
<td class="comment-11" rowspan="1">Play an upward sound</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="25998"></span>658E</td>
<td class="instruction">CALL <a href="27519.html">$6B7F</a></td>
<td class="comment-11" rowspan="1">Play a downward sound</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="26001"></span>6591</td>
<td class="instruction">LD A,$03</td>
<td class="comment-11" rowspan="1">Select MAGENTA border</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="26003"></span>6593</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="26004"></span>6594</td>
<td class="instruction">CALL <a href="24746.html">$60AA</a></td>
<td class="comment-11" rowspan="1">Play an upward sound</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="26007"></span>6597</td>
<td class="instruction">CALL <a href="27519.html">$6B7F</a></td>
<td class="comment-11" rowspan="1">Play a downward sound</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="26010"></span>659A</td>
<td class="instruction">LD A,($5DEB)</td>
<td class="comment-11" rowspan="1">Are we in debug mode?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="26013"></span>659D</td>
<td class="instruction">BIT 0,A</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="26015"></span>659F</td>
<td class="instruction">CALL Z,<a href="27542.html">$6B96</a></td>
<td class="comment-11" rowspan="1">Call debug / save game if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="26018"></span>65A2</td>
<td class="instruction">DI</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="26019"></span>65A3</td>
<td class="instruction">LD HL,$6BD7</td>
<td class="comment-11" rowspan="1">Set high score to 0</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="26022"></span>65A6</td>
<td class="instruction">LD B,$06</td>
<td class="comment-11" rowspan="1">Six digits</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="26024"></span>65A8</td>
<td class="instruction">LD (HL),$30</td>
<td class="comment-11" rowspan="1">"0"</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="26026"></span>65AA</td>
<td class="instruction">INC HL</td>
<td class="comment-11" rowspan="1">Next digit</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="26027"></span>65AB</td>
<td class="instruction">DJNZ $65A8</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="26029"></span>65AD</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="26030"></span>65AE</td>
<td class="instruction">LD A,$07</td>
<td class="comment-11" rowspan="1">White BORDER</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="26032"></span>65B0</td>
<td class="instruction">OUT ($FE),A</td>
<td class="comment-11" rowspan="1">Set it</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="26034"></span>65B2</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-11" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="25904.html">6530</a></span></td>
<td class="up">Up: <a href="../maps/all.html#25983">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="26035.html">65B3</a></span></td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">Copyright Mervyn Estcourt 1983. This disassembly by Ritchie Swann, 2018.</div>
<div class="created">Created using <a href="http://skoolkit.ca/">SkoolKit</a> 7.0.</div>
</footer>
</body>
</html>