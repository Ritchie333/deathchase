<!DOCTYPE html>
<html>
<head>
<title>Deathchase: Routine at 60C1</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />

</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">Deathchase</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="24746.html">60AA</a></span></td>
<td class="up">Up: <a href="../maps/all.html#24769">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="24851.html">6113</a></span></td>
</tr>
</table>
<div class="description">60C1: Switch from NIGHT to DAY</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="4">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="25291.html">62CB</a>.
</div>
</div>
<table class="input-0">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>

</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="24769"></span>60C1</td>
<td class="instruction">LD B,$05</td>
<td class="comment-11" rowspan="1">Swap colour five times</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24771"></span>60C3</td>
<td class="instruction">LD C,$01</td>
<td class="comment-11" rowspan="1">Start off blue</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24773"></span>60C5</td>
<td class="instruction">LD HL,$5DD1</td>
<td class="comment-11" rowspan="1">Get the current sector</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24776"></span>60C8</td>
<td class="instruction">INC (HL)</td>
<td class="comment-11" rowspan="1">Increment to the next one</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24777"></span>60C9</td>
<td class="instruction">LD HL,$5841</td>
<td class="comment-11" rowspan="1">Point to the attribute buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="24780"></span>60CC</td>
<td class="instruction">PUSH BC</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24781"></span>60CD</td>
<td class="instruction">PUSH HL</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24782"></span>60CE</td>
<td class="instruction">LD A,C</td>
<td class="comment-11" rowspan="1">Get the next colour?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24783"></span>60CF</td>
<td class="instruction">CP $04</td>
<td class="comment-11" rowspan="1">Is it cyan?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24785"></span>60D1</td>
<td class="instruction">JR Z,$60F2</td>
<td class="comment-11" rowspan="1">Jump forward if it is</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24787"></span>60D3</td>
<td class="instruction">SLA C</td>
<td class="comment-11" rowspan="1">Shift the colour into PAPER bit position</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24789"></span>60D5</td>
<td class="instruction">SLA C</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24791"></span>60D7</td>
<td class="instruction">SLA C</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24793"></span>60D9</td>
<td class="instruction">LD B,$0A</td>
<td class="comment-11" rowspan="1">10 rows</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="24795"></span>60DB</td>
<td class="instruction">PUSH BC</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24796"></span>60DC</td>
<td class="instruction">PUSH HL</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24797"></span>60DD</td>
<td class="instruction">LD B,$1E</td>
<td class="comment-11" rowspan="1">30 columns</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="24799"></span>60DF</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="1">Get next attribute</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24800"></span>60E0</td>
<td class="instruction">AND $C7</td>
<td class="comment-11" rowspan="2">Turn off PAPER bits and swap them for current colour</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24802"></span>60E2</td>
<td class="instruction">OR C</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24803"></span>60E3</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-11" rowspan="1">Put the attribute back</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24804"></span>60E4</td>
<td class="instruction">INC HL</td>
<td class="comment-11" rowspan="1">Move to next column</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24805"></span>60E5</td>
<td class="instruction">DJNZ $60DF</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24807"></span>60E7</td>
<td class="instruction">POP HL</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24808"></span>60E8</td>
<td class="instruction">LD DE,$0020</td>
<td class="comment-11" rowspan="1">Move to next row</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24811"></span>60EB</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24812"></span>60EC</td>
<td class="instruction">POP BC</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24813"></span>60ED</td>
<td class="instruction">DJNZ $60DB</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24815"></span>60EF</td>
<td class="instruction">CALL <a href="24746.html">$60AA</a></td>
<td class="comment-11" rowspan="1">Play an ascending sound</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="24818"></span>60F2</td>
<td class="instruction">POP HL</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24819"></span>60F3</td>
<td class="instruction">POP BC</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24820"></span>60F4</td>
<td class="instruction">INC C</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24821"></span>60F5</td>
<td class="instruction">DJNZ $60CC</td>
<td class="comment-11" rowspan="1">Next colour</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24823"></span>60F7</td>
<td class="instruction">LD C,$28</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24825"></span>60F9</td>
<td class="instruction">CALL <a href="25335.html">$62F7</a></td>
<td class="comment-11" rowspan="1">Flip background colour on huge trees</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24828"></span>60FC</td>
<td class="instruction">LD A,($5DD1)</td>
<td class="comment-11" rowspan="1">Get current sector</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24831"></span>60FF</td>
<td class="instruction">CP $01</td>
<td class="comment-11" rowspan="1">Is it 1?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24833"></span>6101</td>
<td class="instruction">RET Z</td>
<td class="comment-11" rowspan="1">Return if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24834"></span>6102</td>
<td class="instruction">CALL <a href="24692.html">$6074</a></td>
<td class="comment-11" rowspan="1">Print the sector</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24837"></span>6105</td>
<td class="instruction">LD DE,$6B38</td>
<td class="comment-11" rowspan="1"><a href="27448.html">6B38</a> = "DAY PATROL"</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<span id="24840"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="24851.html">6113</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="24840"></span>6108</td>
<td class="instruction">LD HL,$488A</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24843"></span>610B</td>
<td class="instruction">LD B,$0C</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24845"></span>610D</td>
<td class="instruction">CALL <a href="26953.html">$6949</a></td>
<td class="comment-11" rowspan="1">Display message</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="24848"></span>6110</td>
<td class="instruction">JP <a href="24746.html">$60AA</a></td>
<td class="comment-11" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="24746.html">60AA</a></span></td>
<td class="up">Up: <a href="../maps/all.html#24769">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="24851.html">6113</a></span></td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">Copyright Mervyn Estcourt 1983. This disassembly by Ritchie Swann, 2018.</div>
<div class="created">Created using <a href="http://skoolkit.ca/">SkoolKit</a> 7.0.</div>
</footer>
</body>
</html>